<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Citizen Login | Crystal SMP</title>
<style>
body { font-family: Arial, sans-serif; background:#0d0d0d; color:#fff; display:flex; justify-content:center; align-items:center; height:100vh; }
form { background: rgba(0,0,0,0.7); padding:30px; border-radius:12px; width:350px; }
input, select { width:100%; padding:10px; margin:8px 0; border-radius:6px; border:none; }
button { width:100%; padding:10px; border:none; border-radius:6px; background: #39FF14; color:#000; font-weight:bold; cursor:pointer; }
h2 { text-align:center; color:#FFD700; }
.error { color:#FF3131; text-align:center; }
</style>
</head>
<body>
<form id="loginForm">
  <h2>Citizen Login</h2>
  <select id="role" required>
    <option value="" disabled selected>Select Role</option>
    <option value="player">Player</option>
    <option value="admin">Admin</option>
    <option value="police">Police</option>
  </select>
  <input type="text" placeholder="Username / Minecraft ID" id="username" required>
  <input type="password" placeholder="Password" id="password">
  <div class="error" id="errorMsg"></div>
  <button type="submit">Login</button>
</form>

<script>
const adminCredentials = { username:'admin', password:'admin123' };
const policeCredentials = { username:'police', password:'police123' };

document.getElementById('loginForm').addEventListener('submit', function(e){
  e.preventDefault();
  const username = document.getElementById('username').value.trim();
  const password = document.getElementById('password').value.trim();
  const role = document.getElementById('role').value;
  const errorMsg = document.getElementById('errorMsg');

  const players = JSON.parse(localStorage.getItem('players')||'[]');

  if(role==='admin'){
    if(username===adminCredentials.username && password===adminCredentials.password){
      localStorage.setItem('loggedInRole','admin');
      window.location.href='citizen-dashboard.html';
    } else { errorMsg.textContent="Invalid Admin Credentials!"; }
  } else if(role==='police'){
    if(username===policeCredentials.username && password===policeCredentials.password){
      localStorage.setItem('loggedInRole','police');
      window.location.href='citizen-dashboard.html';
    } else { errorMsg.textContent="Invalid Police Credentials!"; }
  } else if(role==='player'){
    const player = players.find(p=>p.id===username);
    if(player){
      localStorage.setItem('loggedInRole','player');
      localStorage.setItem('loggedInUser', player.username);
      window.location.href='citizen-dashboard.html';
    } else { errorMsg.textContent="Invalid Player ID!"; }
  }
});
</script>
</body>
</html>
