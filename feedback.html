<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Crystal SMP | Feedback</title>
<style>
body {
  margin:0;
  font-family: Arial, sans-serif;
  background: linear-gradient(270deg, #6a0dad, #1e90ff, #00ffff, #ff00ff, #ff4500, #6a0dad);
  background-size: 1200% 1200%;
  animation: animatedBackground 20s ease infinite;
  color:white;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:flex-start;
  min-height:100vh;
  padding:20px;
}

@keyframes animatedBackground {
  0% {background-position:0% 50%;}
  50% {background-position:100% 50%;}
  100% {background-position:0% 50%;}
}

h1,h2{text-align:center; margin-bottom:15px;}

/* Neon style inputs & buttons */
input, textarea {
  padding:10px;
  margin:5px 0;
  border-radius:8px;
  border:none;
  outline:none;
}
button {
  padding:10px 20px;
  border-radius:8px;
  border:none;
  cursor:pointer;
  background:#1e90ff;
  color:#fff;
  margin:5px 0;
  font-weight:bold;
}
button:hover{background:#00ffff;color:#000;}

/* Sections */
#loginDiv, #feedbackSection {width:100%; max-width:500px; margin:auto;}
textarea {width:100%; height:80px; resize:none; border-radius:8px; padding:10px;}
.feedbackItem {
  background: rgba(255,255,255,0.1);
  padding:10px;
  margin:5px 0;
  border-radius:8px;
  display:flex;
  justify-content:space-between;
  align-items:center;
}
.feedbackText {flex:1;}
.feedbackActions button {margin-left:5px;}
#totalFeedback {text-align:center; margin-bottom:10px; font-weight:bold; font-size:1.1rem;}
</style>
</head>
<body>

<div id="loginDiv">
  <h1>Crystal SMP Login</h1>
  <input type="text" id="username" placeholder="Minecraft Username"><br>
  <input type="password" id="password" placeholder="Password"><br>
  <button onclick="login()">Login</button>
</div>

<div id="feedbackSection" style="display:none;">
  <h1>Feedback Section</h1>
  <div id="totalFeedback">Total Feedback: 0</div>

  <textarea id="feedbackInput" placeholder="Write your feedback here..."></textarea><br>
  <button onclick="submitFeedback()">Submit Feedback</button>

  <h2>All Feedback</h2>
  <div id="allFeedback"></div>

  <button onclick="window.location.href='index.html'" style="margin-top:20px;">â¬… Back to Home</button>
</div>

<script>
// Hardcoded password
const correctPassword = "crystalsmp";

// Array to store feedback objects
let feedbackArray = []; 
let currentUser = "";

// Login function
function login(){
  const user = document.getElementById("username").value;
  const pass = document.getElementById("password").value;
  if(user === "" || pass === ""){
    alert("Please enter username and password!");
    return;
  }
  if(pass === correctPassword){
    currentUser = user;
    document.getElementById("loginDiv").style.display="none";
    document.getElementById("feedbackSection").style.display="block";
    renderFeedback();
  } else {
    alert("Wrong password!");
  }
}

// Submit feedback
function submitFeedback(){
  const text = document.getElementById("feedbackInput").value.trim();
  if(text===""){ alert("Write something first!"); return; }

  const now = new Date();
  feedbackArray.push({user: currentUser, text:text, date: now});
  document.getElementById("feedbackInput").value="";
  renderFeedback();
}

// Render all feedback
function renderFeedback(){
  const container = document.getElementById("allFeedback");

  // Remove feedback older than 30 days
  const now = new Date();
  feedbackArray = feedbackArray.filter(fb => (now - new Date(fb.date)) <= 30*24*60*60*1000);

  container.innerHTML="";
  document.getElementById("totalFeedback").textContent = "Total Feedback: " + feedbackArray.length;

  feedbackArray.forEach((fb,i)=>{
    const div = document.createElement("div");
    div.className="feedbackItem";
    
    const textDiv = document.createElement("div");
    textDiv.className="feedbackText";
    textDiv.textContent = `${fb.user}: ${fb.text}`;
    
    div.appendChild(textDiv);
    
    // Only allow edit/delete if feedback belongs to current user
    if(fb.user === currentUser){
      const actionsDiv = document.createElement("div");
      actionsDiv.className="feedbackActions";
      
      // Edit button
      const editBtn = document.createElement("button");
      editBtn.textContent="Edit";
      editBtn.onclick = ()=>{
        const newText = prompt("Edit your feedback:", fb.text);
        if(newText!==null && newText.trim()!==""){
          feedbackArray[i].text = newText.trim();
          renderFeedback();
        }
      }
      
      // Delete button
      const delBtn = document.createElement("button");
      delBtn.textContent="Delete";
      delBtn.onclick = ()=>{
        if(confirm("Are you sure you want to delete this feedback?")){
          feedbackArray.splice(i,1);
          renderFeedback();
        }
      }
      
      actionsDiv.appendChild(editBtn);
      actionsDiv.appendChild(delBtn);
      div.appendChild(actionsDiv);
    }
    
    container.appendChild(div);
  });
}
</script>

</body>
</html>
